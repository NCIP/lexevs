package edu.mayo.informatics.lexgrid.convert.directConversions.owl2;import static org.junit.Assert.*;import java.io.File;import org.LexGrid.LexBIG.DataModel.Collections.ResolvedConceptReferenceList;import org.LexGrid.LexBIG.DataModel.Core.AbsoluteCodingSchemeVersionReference;import org.LexGrid.LexBIG.DataModel.Core.CodingSchemeVersionOrTag;import org.LexGrid.LexBIG.DataModel.Core.ResolvedConceptReference;import org.LexGrid.LexBIG.DataModel.InterfaceElements.types.ProcessState;import org.LexGrid.LexBIG.Exceptions.LBException;import org.LexGrid.LexBIG.Extensions.Generic.LexBIGServiceConvenienceMethods;import org.LexGrid.LexBIG.Impl.function.LexBIGServiceTestCase;import org.LexGrid.LexBIG.Impl.loaders.OWL2LoaderImpl;import org.LexGrid.LexBIG.Impl.testUtility.ServiceHolder;import org.LexGrid.LexBIG.LexBIGService.CodedNodeGraph;import org.LexGrid.LexBIG.LexBIGService.CodedNodeSet;import org.LexGrid.LexBIG.LexBIGService.LexBIGService;import org.LexGrid.LexBIG.LexBIGService.LexBIGServiceManager;import org.LexGrid.LexBIG.Utility.Constructors;import org.LexGrid.LexBIG.Utility.ConvenienceMethods;import org.LexGrid.LexBIG.Utility.LBConstants;import org.LexGrid.codingSchemes.CodingScheme;import org.LexGrid.concepts.Entities;import org.LexGrid.concepts.Entity;import org.LexGrid.concepts.Presentation;import org.LexGrid.relations.AssociationPredicate;import org.LexGrid.relations.AssociationSource;import org.LexGrid.relations.AssociationTarget;import org.junit.After;import org.junit.AfterClass;import org.junit.Before;import org.junit.BeforeClass;import org.junit.Test;import org.lexevs.logging.messaging.impl.CommandLineMessageDirector;import org.springframework.util.Assert;import edu.mayo.informatics.lexgrid.convert.directConversions.owlapi.OwlApi2LGConstants;import edu.mayo.informatics.lexgrid.convert.directConversions.owlapi.OwlApi2LGMain;public class OWL2LoaderLexGridTest {	File owlFile = new File("resources/testData/owl2/owl2-snippet-data.owl");	CodingScheme codingScheme = null;	/**	 * Sets the up codingScheme.	 * 	 * @throws LBException	 */	@Before	public void setUp() throws Exception {		OwlApi2LGMain moem = new OwlApi2LGMain(owlFile.toURI(), null, null,				false, OwlApi2LGConstants.MEMOPT_ALL_IN_MEMORY,				new CommandLineMessageDirector());		codingScheme = moem.map();	}	@Test	public void testGetEntityWithDetails() throws Exception {		Entities entities = codingScheme.getEntities();		for (int i = 0; i < entities.getEntityCount(); i++) {			Entity entity = entities.getEntity(i);			if (entity.getEntityCode().equals("EGFR_pV774_C775insHV")) {				assertNotNull(entity.getDefinition());				int numOfPresentations = entity.getPresentation().length;				assertTrue("Presentations: " + numOfPresentations,						numOfPresentations > 1);			}		}	}	@Test	public void testRelations() throws Exception {		int count;		int sourceCount = 0;		int targetCount = 0;		for (AssociationPredicate ap : codingScheme.getRelations()[1]				.getAssociationPredicate()) {			sourceCount += ap.getSourceCount();			for (AssociationSource source : ap.getSource()) {				if (source.getSourceEntityCode().equals("EGFR_pV774_C775insHV")) {					count = source.getTargetCount();					assertEquals(2, count);				}				targetCount += source.getTargetCount();			}		}		assertEquals(101, sourceCount);		assertEquals(116, targetCount);	}	@Test	public void testRootNodes() throws Exception {		int count = 0;		for (AssociationPredicate ap : codingScheme.getRelations()[1]				.getAssociationPredicate()) {			if (ap.getAssociationName().equalsIgnoreCase("subClassOf")) {				for (AssociationSource source : ap.getSource()) {					for (AssociationTarget target : source.getTarget()) {						if (target.getTargetEntityCode().equals("@@")) {							count++;						}					}				}			}		}		assertTrue("Roots: " + count, count == 7);	}	@After	public void tearDown() {		codingScheme = null;	}	protected String getTestID() {		// TODO Auto-generated method stub		return OWL2LoaderLexGridTest.class.getName();	}}